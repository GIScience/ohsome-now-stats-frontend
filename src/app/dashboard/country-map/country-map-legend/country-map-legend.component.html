<div class="color-legend">
  <div class="legend-title">{{ legendTitle }}</div>
  <div class="legend-bar-container">
    <div class="legend-circles">
      <!-- Negative value circle -->
      <div class="circle-item">
        <div [ngStyle]="getLegendCircleStyle(minValue)"></div>
        <div class="circle-label">{{ formatValue(minValue) }}</div>
      </div>

      <!-- Negative gradient steps (if applicable) -->
      @if (minValue < 0) {
        <div class="gradient-container negative">
          <div class="gradient-line">
            @for (step of negativeGradientSteps; track step) {
              <div
                class="gradient-step negative-step"
                [ngStyle]="getNegativeGradientStepStyle(step)"
              ></div>
            }
          </div>
        </div>
      }

      <!-- Zero value circle (if applicable) -->
      @if (minValue < 0 && maxValue > 0) {
        <div class="circle-item zero-circle">
          <div [ngStyle]="getLegendCircleStyle(0)"></div>
          <div class="circle-label">0</div>
        </div>
      }

      <!-- Positive gradient steps (if applicable) -->
      @if (maxValue > 0) {
        <div class="gradient-container positive">
          <div class="gradient-line">
            @for (step of positiveGradientSteps; track step) {
              <div
                class="gradient-step positive-step"
                [ngStyle]="getPositiveGradientStepStyle(step)"
              ></div>
            }
          </div>
        </div>
      }

      <!-- Positive value circle -->
      @if (maxValue > 0) {
        <div class="circle-item">
          <div [ngStyle]="getLegendCircleStyle(maxValue)"></div>
          <div class="circle-label">{{ formatValue(maxValue) }}</div>
        </div>
      }
    </div>
  </div>
</div>
